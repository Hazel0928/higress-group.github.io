import{x as Jn,A as N,q as ln,P as $n,y as Hn,_ as Un,h as Rn}from"./hooks.module.6Mr8QjZg.js";import"./compat.module.B_pd66n0.js";import{G as Xn}from"./preact.module.LHOPIhyX.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Sn(n,o,r,i){function t(e){return e instanceof r?e:new r(function(c){c(e)})}return new(r||(r=Promise))(function(e,c){function f(s){try{a(i.next(s))}catch(v){c(v)}}function l(s){try{a(i.throw(s))}catch(v){c(v)}}function a(s){s.done?e(s.value):t(s.value).then(f,l)}a((i=i.apply(n,[])).next())})}function Dn(n,o){var r={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},i,t,e,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(a){return function(s){return l([a,s])}}function l(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,t=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(e=r.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){r.label=a[1];break}if(a[0]===6&&r.label<e[1]){r.label=e[1],e=a;break}if(e&&r.label<e[2]){r.label=e[2],r.ops.push(a);break}e[2]&&r.ops.pop(),r.trys.pop();continue}a=o.call(n,r)}catch(s){a=[6,s],t=0}finally{i=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var S=function(){},w=S(),nn=Object,y=function(n){return n===w},C=function(n){return typeof n=="function"},M=function(n,o){return nn.assign({},n,o)},dn="undefined",vn=function(){return typeof window!=dn},_n=function(){return typeof document!=dn},zn=function(){return vn()&&typeof window.requestAnimationFrame!=dn},rn=new WeakMap,Kn=0,K=function(n){var o=typeof n,r=n&&n.constructor,i=r==Date,t,e;if(nn(n)===n&&!i&&r!=RegExp){if(t=rn.get(n),t)return t;if(t=++Kn+"~",rn.set(n,t),r==Array){for(t="@",e=0;e<n.length;e++)t+=K(n[e])+",";rn.set(n,t)}if(r==nn){t="#";for(var c=nn.keys(n).sort();!y(e=c.pop());)y(n[e])||(t+=e+":"+K(n[e])+",");rn.set(n,t)}}else t=i?n.toJSON():o=="symbol"?n.toString():o=="string"?JSON.stringify(n):""+n;return t},gn=!0,Qn=function(){return gn},In=vn(),hn=_n(),pn=In&&window.addEventListener?window.addEventListener.bind(window):S,Yn=hn?document.addEventListener.bind(document):S,yn=In&&window.removeEventListener?window.removeEventListener.bind(window):S,Zn=hn?document.removeEventListener.bind(document):S,Bn=function(){var n=hn&&document.visibilityState;return y(n)||n!=="hidden"},nr=function(n){return Yn("visibilitychange",n),pn("focus",n),function(){Zn("visibilitychange",n),yn("focus",n)}},rr=function(n){var o=function(){gn=!0,n()},r=function(){gn=!1};return pn("online",o),pn("offline",r),function(){yn("online",o),yn("offline",r)}},er={isOnline:Qn,isVisible:Bn},tr={initFocus:nr,initReconnect:rr},en=!vn()||"Deno"in window,ir=function(n){return zn()?window.requestAnimationFrame(n):setTimeout(n,1)},tn=en?Hn:Un,wn=typeof navigator<"u"&&navigator.connection,xn=!en&&wn&&(["slow-2g","2g"].includes(wn.effectiveType)||wn.saveData),Ln=function(n){if(C(n))try{n=n()}catch{n=""}var o=[].concat(n);n=typeof n=="string"?n:(Array.isArray(n)?n.length:n)?K(n):"";var r=n?"$swr$"+n:"";return[n,o,r]},W=new WeakMap,An=0,Cn=1,Mn=2,Q=function(n,o,r,i,t,e,c){c===void 0&&(c=!0);var f=W.get(n),l=f[0],a=f[1],s=f[3],v=l[o],d=a[o];if(c&&d)for(var D=0;D<d.length;++D)d[D](r,i,t);return e&&(delete s[o],v&&v[0])?v[0](Mn).then(function(){return n.get(o)}):n.get(o)},or=0,bn=function(){return++or},Pn=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return Sn(void 0,void 0,void 0,function(){var r,i,t,e,c,f,l,a,s,v,d,D,Y,b,g,u,$,P,I,k,F;return Dn(this,function(L){switch(L.label){case 0:if(r=n[0],i=n[1],t=n[2],e=n[3],c=typeof e=="boolean"?{revalidate:e}:e||{},f=y(c.populateCache)?!0:c.populateCache,l=c.revalidate!==!1,a=c.rollbackOnError!==!1,s=c.optimisticData,v=Ln(i),d=v[0],D=v[2],!d)return[2];if(Y=W.get(r),b=Y[2],n.length<3)return[2,Q(r,d,r.get(d),w,w,l,!0)];if(g=t,$=bn(),b[d]=[$,0],P=!y(s),I=r.get(d),P&&(k=C(s)?s(I):s,r.set(d,k),Q(r,d,k)),C(g))try{g=g(r.get(d))}catch(q){u=q}return g&&C(g.then)?[4,g.catch(function(q){u=q})]:[3,2];case 1:if(g=L.sent(),$!==b[d][0]){if(u)throw u;return[2,g]}else u&&P&&a&&(f=!0,g=I,r.set(d,I));L.label=2;case 2:return f&&(u||(C(f)&&(g=f(g,I)),r.set(d,g)),r.set(D,M(r.get(D),{error:u}))),b[d][1]=bn(),[4,Q(r,d,g,u,w,l,!!f)];case 3:if(F=L.sent(),u)throw u;return[2,f?F:g]}})})},Fn=function(n,o){for(var r in n)n[r][0]&&n[r][0](o)},ar=function(n,o){if(!W.has(n)){var r=M(tr,o),i={},t=Pn.bind(w,n),e=S;if(W.set(n,[i,{},{},{},t]),!en){var c=r.initFocus(setTimeout.bind(w,Fn.bind(w,i,An))),f=r.initReconnect(setTimeout.bind(w,Fn.bind(w,i,Cn)));e=function(){c&&c(),f&&f(),W.delete(n)}}return[n,t,e]}return[n,W.get(n)[4]]},ur=function(n,o,r,i,t){var e=r.errorRetryCount,c=t.retryCount,f=~~((Math.random()+.5)*(1<<(c<8?c:8)))*r.errorRetryInterval;!y(e)&&c>e||setTimeout(i,f,t)},qn=ar(new Map),cr=qn[0],sr=qn[1],fr=M({onLoadingSlow:S,onSuccess:S,onError:S,onErrorRetry:ur,onDiscarded:S,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:xn?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:xn?5e3:3e3,compare:function(n,o){return K(n)==K(o)},isPaused:function(){return!1},cache:cr,mutate:sr,fallback:{}},er),lr=function(n,o){var r=M(n,o);if(o){var i=n.use,t=n.fallback,e=o.use,c=o.fallback;i&&e&&(r.use=i.concat(e)),t&&c&&(r.fallback=M(t,c))}return r},dr=Xn({}),vr=function(n,o){var r=Rn({})[1],i=N(n),t=N({data:!1,error:!1,isValidating:!1}),e=ln(function(c){var f=!1,l=i.current;for(var a in c){var s=a;l[s]!==c[s]&&(l[s]=c[s],t.current[s]&&(f=!0))}f&&!o.current&&r({})},[]);return tn(function(){i.current=n}),[i,t.current,e]},gr=function(n){return C(n[1])?[n[0],n[1],n[2]||{}]:[n[0],null,(n[1]===null?n[2]:n[1])||{}]},hr=function(){return M(fr,Jn(dr))},pr=function(n){return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];var i=hr(),t=gr(o),e=t[0],c=t[1],f=t[2],l=lr(i,f),a=n,s=l.use;if(s)for(var v=s.length;v-- >0;)a=s[v](a);return a(e,c||l.fetcher,l)}},Gn=function(n,o,r){var i=o[n]||(o[n]=[]);return i.push(r),function(){var t=i.indexOf(r);t>=0&&(i[t]=i[i.length-1],i.pop())}},mn={dedupe:!0},yr=function(n,o,r){var i=r.cache,t=r.compare,e=r.fallbackData,c=r.suspense,f=r.revalidateOnMount,l=r.refreshInterval,a=r.refreshWhenHidden,s=r.refreshWhenOffline,v=W.get(i),d=v[0],D=v[1],Y=v[2],b=v[3],g=Ln(n),u=g[0],$=g[1],P=g[2],I=N(!1),k=N(!1),F=N(u),L=N(o),q=N(r),h=function(){return q.current},on=function(){return h().isVisible()&&h().isOnline()},Z=function(E){return i.set(P,M(i.get(P),E))},On=i.get(u),Nn=y(e)?r.fallback[u]:e,x=y(On)?Nn:On,En=i.get(P)||{},H=En.error,Tn=!I.current,kn=function(){return Tn&&!y(f)?f:h().isPaused()?!1:c?y(x)?!1:r.revalidateIfStale:y(x)||r.revalidateIfStale},Wn=function(){return!u||!o?!1:En.isValidating?!0:Tn&&kn()},an=Wn(),un=vr({data:x,error:H,isValidating:an},k),j=un[0],cn=un[1],B=un[2],G=ln(function(E){return Sn(void 0,void 0,void 0,function(){var m,O,T,U,X,V,p,A,R,sn,_,J,fn;return Dn(this,function(z){switch(z.label){case 0:if(m=L.current,!u||!m||k.current||h().isPaused())return[2,!1];U=!0,X=E||{},V=!b[u]||!X.dedupe,p=function(){return!k.current&&u===F.current&&I.current},A=function(){var Vn=b[u];Vn&&Vn[1]===T&&delete b[u]},R={isValidating:!1},sn=function(){Z({isValidating:!1}),p()&&B(R)},Z({isValidating:!0}),B({isValidating:!0}),z.label=1;case 1:return z.trys.push([1,3,,4]),V&&(Q(i,u,j.current.data,j.current.error,!0),r.loadingTimeout&&!i.get(u)&&setTimeout(function(){U&&p()&&h().onLoadingSlow(u,r)},r.loadingTimeout),b[u]=[m.apply(void 0,$),bn()]),fn=b[u],O=fn[0],T=fn[1],[4,O];case 2:return O=z.sent(),V&&setTimeout(A,r.dedupingInterval),!b[u]||b[u][1]!==T?(V&&p()&&h().onDiscarded(u),[2,!1]):(Z({error:w}),R.error=w,_=Y[u],!y(_)&&(T<=_[0]||T<=_[1]||_[1]===0)?(sn(),V&&p()&&h().onDiscarded(u),[2,!1]):(t(j.current.data,O)?R.data=j.current.data:R.data=O,t(i.get(u),O)||i.set(u,O),V&&p()&&h().onSuccess(O,u,r),[3,4]));case 3:return J=z.sent(),A(),h().isPaused()||(Z({error:J}),R.error=J,V&&p()&&(h().onError(J,u,r),(typeof r.shouldRetryOnError=="boolean"&&r.shouldRetryOnError||C(r.shouldRetryOnError)&&r.shouldRetryOnError(J))&&on()&&h().onErrorRetry(J,u,r,G,{retryCount:(X.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return U=!1,sn(),p()&&V&&Q(i,u,R.data,R.error,!1),[2,!0]}})})},[u]),jn=ln(Pn.bind(w,i,function(){return F.current}),[]);if(tn(function(){L.current=o,q.current=r}),tn(function(){if(u){var E=u!==F.current,m=G.bind(w,mn),O=function(p,A,R){B(M({error:A,isValidating:R},t(j.current.data,p)?w:{data:p}))},T=0,U=function(p){if(p==An){var A=Date.now();h().revalidateOnFocus&&A>T&&on()&&(T=A+h().focusThrottleInterval,m())}else if(p==Cn)h().revalidateOnReconnect&&on()&&m();else if(p==Mn)return G()},X=Gn(u,D,O),V=Gn(u,d,U);return k.current=!1,F.current=u,I.current=!0,E&&B({data:x,error:H,isValidating:an}),kn()&&(y(x)||en?m():ir(m)),function(){k.current=!0,X(),V()}}},[u,G]),tn(function(){var E;function m(){var T=C(l)?l(x):l;T&&E!==-1&&(E=setTimeout(O,T))}function O(){!j.current.error&&(a||h().isVisible())&&(s||h().isOnline())?G(mn).then(m):m()}return m(),function(){E&&(clearTimeout(E),E=-1)}},[l,a,s,G]),$n(x),c&&y(x)&&u)throw L.current=o,q.current=r,k.current=!1,y(H)?G(mn):H;return{mutate:jn,get data(){return cn.data=!0,x},get error(){return cn.error=!0,H},get isValidating(){return cn.isValidating=!0,an}}},wr=pr(yr);const br=(...n)=>fetch(...n).then(o=>o.json()),mr=n=>{const[o,r]=Rn(!1),{data:i,error:t}=wr(o?n:null,br,{dedupingInterval:36e5,revalidateOnFocus:!1});return{swrData:i||{},error:t,isLoading:!t&&!i,fetchData:()=>{r(!0)}}};export{mr as u};
