"use strict";(self.webpackChunkhigress_website=self.webpackChunkhigress_website||[]).push([[2352],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>c});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),p=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(i.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),d=p(n),g=r,c=d["".concat(i,".").concat(g)]||d[g]||u[g]||l;return n?a.createElement(c,s(s({ref:t},m),{},{components:n})):a.createElement(c,s({ref:t},m))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,s=new Array(l);s[0]=g;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o[d]="string"==typeof e?e:r,s[1]=o;for(var p=2;p<l;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},691:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const l={title:"Deploy Higress By Helm",keywords:["kubernetes","helm","ops"],description:"Deploy Higress By Helm.",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/en-us/docusaurus-plugin-content-docs/current/ops/deploy-by-helm.md"},s="Deploy Higress By Helm",o={unversionedId:"ops/deploy-by-helm",id:"ops/deploy-by-helm",title:"Deploy Higress By Helm",description:"Deploy Higress By Helm.",source:"@site/i18n/en-us/docusaurus-plugin-content-docs/current/ops/deploy-by-helm.md",sourceDirName:"ops",slug:"/ops/deploy-by-helm",permalink:"/en-us/docs/ops/deploy-by-helm",draft:!1,editUrl:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/en-us/docusaurus-plugin-content-docs/current/ops/deploy-by-helm.md",tags:[],version:"current",frontMatter:{title:"Deploy Higress By Helm",keywords:["kubernetes","helm","ops"],description:"Deploy Higress By Helm.",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/en-us/docusaurus-plugin-content-docs/current/ops/deploy-by-helm.md"},sidebar:"docs",previous:{title:"WAF",permalink:"/en-us/docs/user/waf"},next:{title:"Upgrade",permalink:"/en-us/docs/ops/upgrade"}},i={},p=[{value:"Install Higress",id:"install-higress",level:2},{value:"Helm Installation Command",id:"helm-installation-command",level:3},{value:"Installation Parameters",id:"installation-parameters",level:3},{value:"Support Istio CRD",id:"support-istio-crd",level:2}],m={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"deploy-higress-by-helm"},"Deploy Higress By Helm"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://helm.sh/"},"Helm")," is a package manager for Kubernetes used in software management and deployment. You can use Helm to perform a quick install of Higress Gateway in your Kubernetes cluster."),(0,r.kt)("h2",{id:"install-higress"},"Install Higress"),(0,r.kt)("p",null,"Higress Gateway consists of a control plane component ",(0,r.kt)("inlineCode",{parentName:"p"},"higress-controller")," and a data plane component ",(0,r.kt)("inlineCode",{parentName:"p"},"higress-gateway"),". It uses Istio to management ",(0,r.kt)("strong",{parentName:"p"},"API configurations of the data plane"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"higress-controller")," to manage ",(0,r.kt)("strong",{parentName:"p"},"API configurations of the control plane"),"."),(0,r.kt)("h3",{id:"helm-installation-command"},"Helm Installation Command"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add higress.io https://higress.io/helm-charts\nhelm install higress higress.io/higress -n higress-system --create-namespace\n")),(0,r.kt)("h3",{id:"installation-parameters"},"Installation Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Parameter")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Global Parameters")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"global.local"),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," if installing to a local K8s cluster (e.g.: Kind, Rancher Desktop, etc.)"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"global.ingressClass"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/#ingress-class"},"IngressClass")," which is used to filter Ingress resources Higress Controller watches.",(0,r.kt)("br",null),"If there are multiple gateway instances deployed in the cluster, this parameter can be used to distinguish the scope of each gateway instance.",(0,r.kt)("br",null),"There are some special cases for special IngressClass values:",(0,r.kt)("br",null),'1. If set to "nginx", Higress Controller will watch Ingress resources with the ',(0,r.kt)("inlineCode",{parentName:"td"},"nginx")," IngressClass or without any Ingress class.",(0,r.kt)("br",null),"2. If set to empty, Higress Controller will watch all Ingress resources in the K8s cluster."),(0,r.kt)("td",{parentName:"tr",align:null},"higress")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"global.watchNamespace"),(0,r.kt)("td",{parentName:"tr",align:null},"If not empty, Higress Controller will only watch resources in the specified namespace. When isolating different business systems using K8s namespace, if each namespace requires a standalone gateway instance, this parameter can be used to confine the Ingress watching of Higress within the given namespace."),(0,r.kt)("td",{parentName:"tr",align:null},'""')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"global.disableAlpnH2"),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to disable HTTP/2 in ALPN"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"global.enableStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"If ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", Higress Controller will update the ",(0,r.kt)("inlineCode",{parentName:"td"},"status")," field of Ingress resources.",(0,r.kt)("br",null),"When migrating from Nginx Ingress, in order to avoid ",(0,r.kt)("inlineCode",{parentName:"td"},"status")," field of Ingress objects being overwritten, this parameter needs to be set to false, so Higress won't write the entry IP to the ",(0,r.kt)("inlineCode",{parentName:"td"},"status")," field of the corresponding Ingress object."),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"global.enableIstioAPI"),(0,r.kt)("td",{parentName:"tr",align:null},"If ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", Higress Controller will monitor istio resources as well"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"global.istioNamespace"),(0,r.kt)("td",{parentName:"tr",align:null},"The namespace istio is installed to"),(0,r.kt)("td",{parentName:"tr",align:null},"istio-system")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Core Paramters")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-core.gateway.replicas"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of Higress Gateway pods"),(0,r.kt)("td",{parentName:"tr",align:null},"2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-core.controller.replicas"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of Higress Controller pods"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Console Paramters")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.replicaCount"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of Higress Console pods"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.service.type"),(0,r.kt)("td",{parentName:"tr",align:null},"K8s service type used by Higress Console"),(0,r.kt)("td",{parentName:"tr",align:null},"ClusterIP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.domain"),(0,r.kt)("td",{parentName:"tr",align:null},"Domain used to access Higress Console"),(0,r.kt)("td",{parentName:"tr",align:null},"console.higress.io")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.tlsSecretName"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of Secret resource used by TLS connections."),(0,r.kt)("td",{parentName:"tr",align:null},'""')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.web.login.prompt"),(0,r.kt)("td",{parentName:"tr",align:null},"Prompt message to be displayed on the login page"),(0,r.kt)("td",{parentName:"tr",align:null},'""')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.admin.password.value"),(0,r.kt)("td",{parentName:"tr",align:null},"If not empty, the admin password will be configured to the specified value."),(0,r.kt)("td",{parentName:"tr",align:null},'""')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.admin.password.length"),(0,r.kt)("td",{parentName:"tr",align:null},"The length of random admin password generated during installation. Only works when ",(0,r.kt)("inlineCode",{parentName:"td"},"higress-console.admin.password.value")," is not set."),(0,r.kt)("td",{parentName:"tr",align:null},"8")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.o11y.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"If ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", o11y suite (Grafana + Promethues) will be installed."),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"higress-console.pvc.rwxSupported"),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},"false")," when installing to a standard K8s cluster and the target cluster doesn't support the ReadWriteMany access mode of PersistentVolumeClaim."),(0,r.kt)("td",{parentName:"tr",align:null},"true")))),(0,r.kt)("h2",{id:"support-istio-crd"},"Support Istio CRD"),(0,r.kt)("p",null,"The CRD of Istio needs to be installed in advance in the cluster. If you do not want to install Istio, you can also install only the CRD of Istio:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add istio https://istio-release.storage.googleapis.com/charts\nhelm install istio-base istio/base -n istio-system\n")),(0,r.kt)("p",null,"In this mode, you need to update the deployment parameters of Higress:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm upgrade higress -n higress-system --set global.enableIstioAPI=true higress.io/higress\n")))}u.isMDXComponent=!0}}]);