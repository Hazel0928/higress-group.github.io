"use strict";(self.webpackChunkhigress_website=self.webpackChunkhigress_website||[]).push([[2619],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),m=i,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return n?r.createElement(h,a(a({ref:t},c),{},{components:n})):r.createElement(h,a({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2137:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var r=n(7462),i=(n(7294),n(3905));const o={title:"Component Compilation Instructions",keywords:["higress","architecture"],description:"Higress Component Compilation Instructions.",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/zh-cn/docusaurus-plugin-content-docs/current/dev/architecture.md"},a="Component Compilation Instructions",l={unversionedId:"dev/architecture",id:"dev/architecture",title:"Component Compilation Instructions",description:"Higress Component Compilation Instructions.",source:"@site/i18n/en-us/docusaurus-plugin-content-docs/current/dev/architecture.md",sourceDirName:"dev",slug:"/dev/architecture",permalink:"/en-us/docs/dev/architecture",draft:!1,editUrl:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/zh-cn/docusaurus-plugin-content-docs/current/dev/architecture.md",tags:[],version:"current",frontMatter:{title:"Component Compilation Instructions",keywords:["higress","architecture"],description:"Higress Component Compilation Instructions.",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/zh-cn/docusaurus-plugin-content-docs/current/dev/architecture.md"},sidebar:"docs",previous:{title:"Code Reading Instructions",permalink:"/en-us/docs/dev/code"},next:{title:"Higress Custom CRD Development Guidelines",permalink:"/en-us/docs/dev/CustomResourceDefinition"}},s={},u=[{value:"Higress Controller",id:"higress-controller",level:2},{value:"Higress Gateway",id:"higress-gateway",level:2},{value:"Quick Build",id:"quick-build",level:3},{value:"Full Build",id:"full-build",level:3}],c={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(p,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"component-compilation-instructions"},"Component Compilation Instructions"),(0,i.kt)("h2",{id:"higress-controller"},"Higress Controller"),(0,i.kt)("p",null,"The Higress controller is a control plane that connects to Istio to generate Istio API objects and sends them to Istio using the xDS protocol."),(0,i.kt)("p",null,"To compile the binary that can run in the local environment, execute ",(0,i.kt)("inlineCode",{parentName:"p"},"make build")," in the higress repository directory."),(0,i.kt)("p",null,"If need to compile the Docker image, please execute ",(0,i.kt)("inlineCode",{parentName:"p"},"make docker-build")," ."),(0,i.kt)("h2",{id:"higress-gateway"},"Higress Gateway"),(0,i.kt)("p",null,"The Higress gateway is a data plane that implements gateway routing and forwarding capabilities."),(0,i.kt)("h3",{id:"quick-build"},"Quick Build"),(0,i.kt)("p",null,"Suitable scenario: Envoy itself isn't modified, meaning there is no need to rebuild the envoy binary."),(0,i.kt)("p",null,"Steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Enter the higress repo in the terminal."),(0,i.kt)("li",{parentName:"ol"},"Execute ",(0,i.kt)("inlineCode",{parentName:"li"},"make build-gateway-local")," to start building the image of Higress Gateway."),(0,i.kt)("li",{parentName:"ol"},"The image tag will be displayed in the terminal after the build finishes.")),(0,i.kt)("h3",{id:"full-build"},"Full Build"),(0,i.kt)("p",null,"Suitable scenario: The envoy binary needs to be rebuilt."),(0,i.kt)("p",null,"Steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Enter the higress repo in the terminal."),(0,i.kt)("li",{parentName:"ol"},"Execute ",(0,i.kt)("inlineCode",{parentName:"li"},"cd external/proxy; BUILD_WITH_CONTAINER=1 make test_release")," to build the envoy binary."),(0,i.kt)("li",{parentName:"ol"},"Once the build finishes, the built artifact, envoy.tar.gz, will be placed in the ",(0,i.kt)("inlineCode",{parentName:"li"},"external/package")," folder in the higress repo."),(0,i.kt)("li",{parentName:"ol"},"Rename the ",(0,i.kt)("inlineCode",{parentName:"li"},"envoy.tar.gz")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"envoy-amd64.tar.gz")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"envoy-arm64.tar.gz"),", based on your local architecture."),(0,i.kt)("li",{parentName:"ol"},"If you want to build a multi-arch image, please re-do step 2 and 3 with another architecture, and copy the renamed built artifact here."),(0,i.kt)("li",{parentName:"ol"},'Follow the steps mentioned above in the "Quick Build" section to build an Higress Gateway image.')))}d.isMDXComponent=!0}}]);