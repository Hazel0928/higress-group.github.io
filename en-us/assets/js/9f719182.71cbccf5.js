"use strict";(self.webpackChunkhigress_website=self.webpackChunkhigress_website||[]).push([[3905],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,u=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),d=l(n),p=o,g=d["".concat(u,".").concat(p)]||d[p]||h[p]||s;return n?r.createElement(g,i(i({ref:t},c),{},{components:n})):r.createElement(g,i({ref:t},c))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,i=new Array(s);i[0]=p;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a[d]="string"==typeof e?e:o,i[1]=a;for(var l=2;l<s;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3639:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var r=n(7462),o=(n(7294),n(3905));const s={title:"Request Monitoring Based on Prometheus",keywords:["Higress","Prometheus"],description:"Request Monitoring Based on Prometheus",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/en-us/docusaurus-plugin-content-docs/current/user/prometheus.md"},i="Request Monitoring Based on Prometheus",a={unversionedId:"user/prometheus",id:"user/prometheus",title:"Request Monitoring Based on Prometheus",description:"Request Monitoring Based on Prometheus",source:"@site/i18n/en-us/docusaurus-plugin-content-docs/current/user/prometheus.md",sourceDirName:"user",slug:"/user/prometheus",permalink:"/en-us/docs/user/prometheus",draft:!1,editUrl:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/en-us/docusaurus-plugin-content-docs/current/user/prometheus.md",tags:[],version:"current",frontMatter:{title:"Request Monitoring Based on Prometheus",keywords:["Higress","Prometheus"],description:"Request Monitoring Based on Prometheus",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/en-us/docusaurus-plugin-content-docs/current/user/prometheus.md"},sidebar:"docs",previous:{title:"Higress Dubbo",permalink:"/en-us/docs/user/dubbo"},next:{title:"WAF",permalink:"/en-us/docs/user/waf"}},u={},l=[{value:"Use the Higress Console Built-In Monitor Suite",id:"use-the-higress-console-built-in-monitor-suite",level:2},{value:"Use a Standalone Monitor Suite",id:"use-a-standalone-monitor-suite",level:2}],c={toc:l},d="wrapper";function h(e){let{components:t,...s}=e;return(0,o.kt)(d,(0,r.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"request-monitoring-based-on-prometheus"},"Request Monitoring Based on Prometheus"),(0,o.kt)("h2",{id:"use-the-higress-console-built-in-monitor-suite"},"Use the Higress Console Built-In Monitor Suite"),(0,o.kt)("p",null,"Higress Console has a built-in monitor suite based on Prometheus + Grafana, which isn't installed by default. When installing Higress with Helm, you can enable it by adding the following argument to the command line: ",(0,o.kt)("inlineCode",{parentName:"p"},"--set global.o11y.enabled=true"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add higress.io https://higress.io/helm-charts\nhelm install higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set global.o11y.enabled=true\n")),(0,o.kt)("p",null,"Note: When installing to a standard K8s cluster (meaning without specifying ",(0,o.kt)("inlineCode",{parentName:"p"},"global.local=true"),"), the PersistentVolumeClaim configured in the suite uses the access mode of ",(0,o.kt)("inlineCode",{parentName:"p"},"ReadWriteMany")," by default. If the target K8s cluster doesn't support this mode, you can add the following argument to the command line to change the access mode to ",(0,o.kt)("inlineCode",{parentName:"p"},"ReadWriteOnce"),": ",(0,o.kt)("inlineCode",{parentName:"p"},"--set global.pvc.rwxSupported=false"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add higress.io https://higress.io/helm-charts\nhelm install higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set global.o11y.enabled=true --set global.pvc.rwxSupported=false\n")),(0,o.kt)("p",null,'After installation, open Higress Console in your browser, and click "Dashboard" on the left navigation area. The built-in dashboard will be displayed on the right.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:n(4325).Z,width:"1920",height:"937"})),(0,o.kt)("h2",{id:"use-a-standalone-monitor-suite"},"Use a Standalone Monitor Suite"),(0,o.kt)("p",null,"Both the data and control planes of Higress expose a set of metrics via API. To monitor them, you just need to add probe configurations into Prometheus and configure a dashboard in Grafana."),(0,o.kt)("p",null,'Before starting the configuration, please open Higress Console in your browser and switch to "Dashboard" from the left navigation area. The external dashboard configuration page and related notes will be displayed on the right.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:n(6188).Z,width:"1920",height:"937"})),(0,o.kt)("p",null,"Update the configurations of Prometheus and Grafana following the notes. Then put the Grafana dashboard into the textbox above and save. The page will reload automatically and your dashboard will be shown on the right."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:n(752).Z,width:"1920",height:"937"})),(0,o.kt)("p",null,'If you\'d like to update the dashboard URL, you can click the "Reconfigure" button on the top left corner.'))}h.isMDXComponent=!0},4325:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/builtin-1ba24680c590ef3c63bbbb980a799c12.png"},752:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/external-after-eed3252372a13fd8130d34eae3d3965b.png"},6188:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/external-before-77ba14cd61a4ccdc42a3e0d9e1f19405.png"}}]);